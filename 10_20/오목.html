<html>
<head>
  <title>Vue.js 오목</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <style>
    body { font-family: system-ui, Arial; background:#f6f8ff; margin:0; padding:20px; }
    h1 { margin:0 0 10px; }
    .bar { display:flex; gap:10px; align-items:center; margin:8px 0 16px; flex-wrap:wrap; }
    .btn { padding:8px 14px; border-radius:10px; border:1px solid #d0d4f0; background:#fff; cursor:pointer; }
    .btn.primary { background:#2f6af3; color:#fff; border-color:#2f6af3; }
    .stat { padding:6px 10px; border-radius:10px; background:#eef2ff; color:#2f6af3; border:1px solid #dfe6ff; }

    /* 바둑판 */
    .board {
      position: relative;
      background:#f0d79b;
      border: 6px solid #8a642e;
      border-radius: 8px;
      box-shadow: 0 10px 30px rgba(0,0,0,.15);
      width: 530px; height: 530px;
      user-select:none;
    }
    /* 15x15 교차선 */
    canvas { position:absolute; left:0; top:0; }

    /* 돌: 교차점에 맞춤 */
    .stone {
      position:absolute;
      width:26px; height:26px; border-radius:50%;
      transform: translate(-50%, -50%);
      box-shadow:0 6px 16px rgba(0,0,0,.25);
      transition: transform .07s ease;
    }
    .black { background:#111; }
    .white { background:#f5f5f5; border:1px solid #dcdcdc; }
    .last  { outline:2px solid #ffb703; outline-offset:1px; }

    /* 클릭 가능한 교차점 */
    .spot {
      position:absolute;
      width:30px; height:30px;
      transform: translate(-50%, -50%);
      cursor:pointer; border-radius:50%;
    }
    .spot:hover::after {
      content:''; position:absolute; inset:0;
      background:rgba(47,106,243,0.25);
      border-radius:50%;
    }

    /* 중앙 승리 오버레이 */
    .overlay {
      position: fixed; inset:0;
      display:flex; align-items:center; justify-content:center;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(3px);
      color:#fff; z-index:10;
      animation: fade .3s ease;
    }
    @keyframes fade { from{opacity:0} to{opacity:1} }
    .panel {
      background:#121733; padding:24px 30px; border-radius:16px;
      box-shadow:0 12px 30px rgba(0,0,0,.4); text-align:center; min-width:280px;
    }
    .panel h2 { margin:0 0 8px; }
    .panel .big { font-size:36px; font-weight:800; margin-bottom:10px; }
  </style>
</head>
<body>
  <div id="app">
    <h1>오목</h1>
    <div class="bar">
      <span class="stat" v-if="!winner">턴: {{ turn===1?'흑':'백' }}</span>
      <span class="stat" v-else>승자: {{ winner===1?'흑':'백' }}</span>
      <span class="stat">수: {{ history.length }}</span>
      <button class="btn" @click="undo" :disabled="history.length===0 || winner">무르기</button>
      <button class="btn primary" @click="reset">재시작</button>
    </div>

    <div class="board" ref="board" @contextmenu.prevent>
      <canvas ref="grid" width="530" height="530"></canvas>

      <div v-for="(v,i) in board" v-if="v!==0"
           :key="'stone'+i"
           class="stone"
           :class="[{black:v===1,white:v===2}, lastIndex===i?'last':'']"
           :style="posStyle(i)"></div>

      <div v-for="i in size*size" :key="'spot'+i"
           class="spot"
           :style="posStyle(i-1)"
           @click="placeAt(i-1)"></div>
    </div>

    <div v-if="winner" class="overlay">
      <div class="panel">
        <h2>축하합니다!</h2>
        <div class="big">{{ winner===1?'흑':'백' }}의 승리!</div>
        <div>{{ history.length }}수 만에 끝났어요.</div>
        <button class="btn primary" style="margin-top:14px;" @click="reset">새 판 시작</button>
      </div>
    </div>
  </div>

  <script>
  Vue.createApp({
    data() {
      const size = 15;
      const gap = 34;    // 선 간격
      const offset = 32; // 첫 교차점 오프셋
      return {
        size, gap, offset,
        board:Array(size*size).fill(0),
        turn:1,
        history:[],
        lastIndex:-1,
        winner:0
      };
    },
    mounted(){
      this.drawGrid();
    },
    methods:{
      drawGrid(){
        const ctx=this.$refs.grid.getContext('2d');
        ctx.clearRect(0,0,530,530);
        ctx.strokeStyle='rgba(0,0,0,0.4)';
        ctx.lineWidth=1;
        for(let i=0;i<this.size;i++){
          const x=this.offset+i*this.gap;
          ctx.beginPath();
          ctx.moveTo(this.offset,this.offset+i*this.gap);
          ctx.lineTo(this.offset+this.gap*(this.size-1),this.offset+i*this.gap);
          ctx.stroke();
          ctx.beginPath();
          ctx.moveTo(x,this.offset);
          ctx.lineTo(x,this.offset+this.gap*(this.size-1));
          ctx.stroke();
        }
      },
      rc(i){ return [Math.floor(i/this.size), i%this.size]; },
      idx(r,c){ return r*this.size+c; },
      inRange(r,c){ return r>=0 && c>=0 && r<this.size && c<this.size; },
      posStyle(i){
        const [r,c]=this.rc(i);
        const left=this.offset+c*this.gap;
        const top=this.offset+r*this.gap;
        return `left:${left}px; top:${top}px;`;
      },
      placeAt(i){
        if(this.winner||this.board[i]!==0) return;
        this.board[i]=this.turn;
        this.history.push([i,this.turn]);
        this.lastIndex=i;
        if(this.checkWin(i,this.turn)){ this.winner=this.turn; return; }
        this.turn=this.turn===1?2:1;
      },
      countDir(r,c,dr,dc,who){
        let cnt=0;
        while(this.inRange(r,c)&&this.board[this.idx(r,c)]===who){
          cnt++; r+=dr; c+=dc;
        }
        return cnt;
      },
      checkWin(i,who){
        const [r,c]=this.rc(i);
        const dirs=[[0,1],[1,0],[1,1],[1,-1]];
        for(const [dr,dc] of dirs){
          const a=this.countDir(r,c,dr,dc,who);
          const b=this.countDir(r,c,-dr,-dc,who)-1;
          if(a+b>=5) return true;
        }
        return false;
      },
      undo(){
        if(this.winner||this.history.length===0)return;
        const [i,who]=this.history.pop();
        this.board[i]=0;
        this.lastIndex=this.history.length?this.history[this.history.length-1][0]:-1;
        this.turn=who;
      },
      reset(){
        this.board.fill(0);
        this.turn=1; this.history=[]; this.lastIndex=-1; this.winner=0;
        this.drawGrid();
      }
    }
  }).mount('#app');
  </script>
</body>
</html>